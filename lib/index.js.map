{"version":3,"sources":["../src/index.js"],"names":["mapId","url","res","get","metaData","parseMetaData","text","mapData","parseMapData","getJson","html","match","exec","Error","JSON","parse"],"mappings":";;;;;;;;+BAEO,WAAwBA,KAAxB,EAA+B;AACpC,QAAMC,iCAA+BD,KAArC;AACA,QAAME,MAAM,MAAM,qBAAQC,GAAR,CAAYF,GAAZ,CAAlB;;AAEA,WAAO;AACLG,gBAAUC,cAAcH,IAAII,IAAlB,CADL;AAELC,eAASC,aAAaN,IAAII,IAAjB;AAFJ,KAAP;AAID,G;;kBARqBG,O;;;;;QAUNJ,a,GAAAA,a;QAOAG,Y,GAAAA,Y;;AAnBhB;;;;;;;;AAYO,SAASH,aAAT,CAAwBK,IAAxB,EAA8B;AACnC,MAAMC,QAAQ,iBAAiBC,IAAjB,CAAsBF,IAAtB,CAAd;AACA,MAAI,CAACC,KAAL,EAAY,MAAME,MAAM,iCAAN,CAAN;AACZ,SAAOC,KAAKC,KAAL,CAAWJ,MAAM,CAAN,CAAX,CAAP;AACD;;AAGM,SAASH,YAAT,CAAuBE,IAAvB,EAA6B;AAClC,MAAMC,QAAQ,kCAAkCC,IAAlC,CAAuCF,IAAvC,CAAd;AACA,MAAI,CAACC,KAAL,EAAY,MAAME,MAAM,gCAAN,CAAN;AACZ,SAAOC,KAAKC,KAAL,CAAWJ,MAAM,CAAN,CAAX,CAAP;AACD;;kBAEcF,O","file":"index.js","sourcesContent":["import request from 'superagent';\n\nexport async function getJson (mapId) {\n  const url = `https://caltopo.com/m/${mapId}`;\n  const res = await request.get(url);\n\n  return {\n    metaData: parseMetaData(res.text),\n    mapData: parseMapData(res.text)\n  };\n}\n\nexport function parseMetaData (html) {\n  const match = /sarsoft=(.+)$/m.exec(html);\n  if (!match) throw Error('Unable to parse meta data JSON.');\n  return JSON.parse(match[1]);\n}\n\n\nexport function parseMapData (html) {\n  const match = /org\\.sarsoft\\.preload = (.+);$/m.exec(html);\n  if (!match) throw Error('Unable to parse map data JSON.');\n  return JSON.parse(match[1]);\n}\n\nexport default getJson;\n"]}