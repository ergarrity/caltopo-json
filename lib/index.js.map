{"version":3,"sources":["../src/index.js"],"names":["mapId","url","res","get","parseJson","text","e","Error","getJson","html","match","exec","JSON","parse"],"mappings":";;;;;;;;+BAIO,WAAwBA,KAAxB,EAA+B;AACpC,QAAMC,iCAA+BD,KAArC;AACA,QAAME,MAAM,MAAM,qBAAQC,GAAR,CAAYF,GAAZ,CAAlB;;AAEA,QAAI;AACF,aAAOG,UAAUF,IAAIG,IAAd,CAAP;AACD,KAFD,CAEE,OAAOC,CAAP,EAAU;AACV,YAAMC,+CAA6CP,KAA7C,QAAN;AACD;AACF,G;;kBATqBQ,O;;;;;QAWNJ,S,GAAAA,S;;AAfhB;;;;;;;;kBAEeI,O;AAaR,SAASJ,SAAT,CAAoBK,IAApB,EAA0B;AAC/B,MAAMC,QAAQ,gCAAgCC,IAAhC,CAAqCF,IAArC,CAAd;AACA,MAAI,CAACC,KAAL,EAAY,MAAMH,MAAM,uBAAN,CAAN;AACZ,SAAOK,KAAKC,KAAL,CAAWH,MAAM,CAAN,CAAX,CAAP;AACD","file":"index.js","sourcesContent":["import request from 'superagent';\n\nexport default getJson;\n\nexport async function getJson (mapId) {\n  const url = `https://caltopo.com/m/${mapId}`;\n  const res = await request.get(url);\n\n  try {\n    return parseJson(res.text);\n  } catch (e) {\n    throw Error(`Unable to get JSON for CalTopo map \"${mapId}\".`);\n  }\n}\n\nexport function parseJson (html) {\n  const match = /org\\.sarsoft\\.preload = (.+);/.exec(html);\n  if (!match) throw Error('Unable to parse JSON.');\n  return JSON.parse(match[1]);\n}\n"]}